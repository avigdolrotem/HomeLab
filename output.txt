ubuntu@ip-10-0-1-88:~$ get-db-secret "homelab-dev-vaultwarden-db"
echo "---"
get-db-secret "homelab-dev-vaultwarden-db" | xxd  # Show raw bytes
{'host': 'homelab-dev-postgres.cu3sw4eky9tq.us-east-1.rds.amazonaws.com', 'port': '5432', 'database': 'vaultwarden', 'username': 'vaultwarden_user', 'password': 'IeeG6kr91hD5S4TRjRXUoKVESaIDxbtp', 'url': 'postgresql://vaultwarden_user:IeeG6kr91hD5S4TRjRXUoKVESaIDxbtp@homelab-dev-postgres.cu3sw4eky9tq.us-east-1.rds.amazonaws.com:5432/vaultwarden'}
---
00000000: 7b27 686f 7374 273a 2027 686f 6d65 6c61  {'host': 'homela
00000010: 622d 6465 762d 706f 7374 6772 6573 2e63  b-dev-postgres.c
00000020: 7533 7377 3465 6b79 3974 712e 7573 2d65  u3sw4eky9tq.us-e
00000030: 6173 742d 312e 7264 732e 616d 617a 6f6e  ast-1.rds.amazon
00000040: 6177 732e 636f 6d27 2c20 2770 6f72 7427  aws.com', 'port'
00000050: 3a20 2735 3433 3227 2c20 2764 6174 6162  : '5432', 'datab
00000060: 6173 6527 3a20 2776 6175 6c74 7761 7264  ase': 'vaultward
00000070: 656e 272c 2027 7573 6572 6e61 6d65 273a  en', 'username':
00000080: 2027 7661 756c 7477 6172 6465 6e5f 7573   'vaultwarden_us
00000090: 6572 272c 2027 7061 7373 776f 7264 273a  er', 'password':
000000a0: 2027 4965 6547 366b 7239 3168 4435 5334   'IeeG6kr91hD5S4
000000b0: 5452 6a52 5855 6f4b 5645 5361 4944 7862  TRjRXUoKVESaIDxb
000000c0: 7470 272c 2027 7572 6c27 3a20 2770 6f73  tp', 'url': 'pos
000000d0: 7467 7265 7371 6c3a 2f2f 7661 756c 7477  tgresql://vaultw
000000e0: 6172 6465 6e5f 7573 6572 3a49 6565 4736  arden_user:IeeG6
000000f0: 6b72 3931 6844 3553 3454 526a 5258 556f  kr91hD5S4TRjRXUo
00000100: 4b56 4553 6149 4478 6274 7040 686f 6d65  KVESaIDxbtp@home
00000110: 6c61 622d 6465 762d 706f 7374 6772 6573  lab-dev-postgres
00000120: 2e63 7533 7377 3465 6b79 3974 712e 7573  .cu3sw4eky9tq.us
00000130: 2d65 6173 742d 312e 7264 732e 616d 617a  -east-1.rds.amaz
00000140: 6f6e 6177 732e 636f 6d3a 3534 3332 2f76  onaws.com:5432/v
00000150: 6175 6c74 7761 7264 656e 277d 0a         aultwarden'}.
ubuntu@ip-10-0-1-88:~$ aws secretsmanager get-secret-value --secret-id homelab-dev-vaultwarden-db --query SecretString --output text
{'host': 'homelab-dev-postgres.cu3sw4eky9tq.us-east-1.rds.amazonaws.com', 'port': '5432', 'database': 'vaultwarden', 'username': 'vaultwarden_user', 'password': 'IeeG6kr91hD5S4TRjRXUoKVESaIDxbtp', 'url': 'postgresql://vaultwarden_user:IeeG6kr91hD5S4TRjRXUoKVESaIDxbtp@homelab-dev-postgres.cu3sw4eky9tq.us-east-1.rds.amazonaws.com:5432/vaultwarden'}
ubuntu@ip-10-0-1-88:~$ aws secretsmanager get-secret-value --secret-id homelab-dev-vaultwarden-db --query SecretString --output text | jq .
parse error: Invalid numeric literal at line 1, column 8

rotem@Home:~/Repositories/homelab/infrastructure/terraform/environments/dev$ terraform show | grep -A 20 -B 5 "iam_role_policy"
            }
        )
    }
}

# module.iam.aws_iam_role_policy.ec2_policy:
resource "aws_iam_role_policy" "ec2_policy" {
    id          = "homelab-dev-ec2-role:homelab-dev-ec2-policy"
    name        = "homelab-dev-ec2-policy"
    name_prefix = null
    policy      = jsonencode(
        {
            Statement = [
                {
                    Action   = [
                        "s3:GetObject",
                        "s3:PutObject",
                        "s3:DeleteObject",
                        "s3:ListBucket",
                    ]
                    Effect   = "Allow"
                    Resource = [
                        "arn:aws:s3:::homelab-backups-874888505976",
                        "arn:aws:s3:::homelab-backups-874888505976/*",
                    ]
                },
                {
--
            }
        )
    }
}

# module.lambda_scheduler.aws_iam_role_policy.lambda_policy:
resource "aws_iam_role_policy" "lambda_policy" {
    id          = "homelab-dev-lambda-role:homelab-dev-lambda-policy"
    name        = "homelab-dev-lambda-policy"
    name_prefix = null
    policy      = jsonencode(
        {
            Statement = [
                {
                    Action   = [
                        "logs:CreateLogGroup",
                        "logs:CreateLogStream",
                        "logs:PutLogEvents",
                    ]
                    Effect   = "Allow"
                    Resource = "arn:aws:logs:*:*:*"
                },
                {
                    Action   = [
                        "ec2:StartInstances",
                        "ec2:StopInstances",
                        "ec2:DescribeInstances",

ubuntu@ip-10-0-1-88:~$ docker compose logs vaultwarden 2>&1 | head -20
docker compose logs nextcloud 2>&1 | head -20
docker compose logs grafana 2>&1 | head -20
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
ubuntu@ip-10-0-1-88:~$ docker compose exec vaultwarden env | grep -i db
docker compose exec nextcloud env | grep -i db
no configuration file provided: not found
no configuration file provided: not found